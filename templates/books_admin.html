<!DOCTYPE html>
<html>
<head><title>Manage Books</title></head>
<body style="margin:0;font-family:Arial;background:#f7f7f7;">
  {{topnav|safe}}
  <div style="margin-top:90px;display:flex;flex-direction:column;align-items:center;text-align:center;padding:20px;">
    <h2 style="color:#2c3e50;">Book Management</h2>

    <!-- Add Book Form -->
    <form method="post" style="margin:20px 0;display:flex;gap:10px;flex-wrap:wrap;justify-content:center;">
      <input name="title" placeholder="Title" required style="padding:5px;">
      <input name="author" placeholder="Author" required style="padding:5px;">
      <input name="quantity" type="number" placeholder="Qty" required style="padding:5px;width:80px;">
      <button type="submit" name="add" value="1" style="padding:5px 15px;background:#27ae60;color:white;border:none;border-radius:4px;">Add</button>
    </form>

    <!-- Search Bar -->
    <form method="get" style="margin-bottom:20px;">
      <input name="search" value="{{search}}" placeholder="Search books..." style="padding:5px;">
      <button type="submit" style="padding:5px 15px;background:#2980b9;color:white;border:none;border-radius:4px;">Search</button>
    </form>

    <p style="color:green;">{{msg}}</p>

    <!-- Books Table -->
    <table border="1" cellpadding="5" cellspacing="0" style="background:white;width:80%;border-collapse:collapse;margin-top:10px;">
      <tr style="background:#2c3e50;color:white;">
        <th>ID</th><th>Title</th><th>Author</th><th>Quantity</th><th>Actions</th>
      </tr>
      {% for b in books %}
      <tr>
        <td>{{b[0]}}</td><td>{{b[1]}}</td><td>{{b[2]}}</td><td>{{b[3]}}</td>
        <td>
          <!-- Edit Button -->
          <form action="/edit_book/{{b[0]}}" method="get" style="display:inline;">
            <button type="submit" style="padding:3px 8px;background:#f39c12;color:white;border:none;border-radius:4px;">Edit</button>
          </form>
          <!-- Delete Button -->
          <form method="post" style="display:inline;">
            <button type="submit" name="delete" value="{{b[0]}}" style="padding:3px 8px;background:red;color:white;border:none;border-radius:4px;">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </table>
  </div>
</body>
</html>
